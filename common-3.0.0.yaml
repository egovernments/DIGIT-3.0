openapi: 3.0.3
info:
  title: Common API Specification
  version: 1.0.0
  description: Common headers and objects for all microservices.

paths: {}

components:
  parameters:
    AuthorizationHeader:
      name: Authorization
      in: header
      required: true
      description: "Bearer token for authentication. Required for secured endpoints."
      schema:
        type: string
        minLength: 10
        maxLength: 2048
        example: "Bearer eyJhbGciOiJIUzI1..."

    RequestIdHeader:
      name: X-Request-ID
      in: header
      required: true
      description: "Unique identifier for tracking each request. Helps in debugging logs."
      schema:
        type: string
        minLength: 8
        maxLength: 50
        example: "req-12345-abcd"

    CorrelationIdHeader:
      name: X-Correlation-ID
      in: header
      required: true
      description: "Used for distributed tracing across multiple services."
      schema:
        type: string
        minLength: 8
        maxLength: 50
        example: "corr-67890-xyz"

    ContentTypeHeader:
      name: Content-Type
      in: header
      required: true
      description: "Specifies the request format. Must be application/json."
      schema:
        type: string
        enum: ["application/json"]
        example: "application/json"

    AcceptHeader:
      name: Accept
      in: header
      required: true
      description: "Specifies the expected response format. Must be application/json."
      schema:
        type: string
        enum: ["application/json"]
        example: "application/json"

    UserAgentHeader:
      name: User-Agent
      in: header
      required: false
      description: "Identifies the client making the request (browser, mobile app, etc.)."
      schema:
        type: string
        minLength: 5
        maxLength: 255
        example: "Mozilla/5.0 (Windows NT 10.0; Win64; x64)"

    TenantIdHeader:
      name: X-Tenant-ID
      in: header
      required: true
      description: "Identifies the tenant making the request. Required in multi-tenant systems."
      schema:
        type: string
        minLength: 3
        maxLength: 50
        example: "tenant-xyz"

    ForwardedForHeader:
      name: X-Forwarded-For
      in: header
      required: false
      description: "Client IP address (used for tracing in load-balanced environments)."
      schema:
        type: string
        example: "192.168.1.1"

  responses:
    CommonResponseHeaders:
      description: "Standard response headers returned with all API responses."
      headers:
        X-Request-ID:
          description: "Echoes back the X-Request-ID from the request for correlation."
          schema:
            type: string
          example: "req-12345-abcd"
        X-Correlation-ID:
          description: "Echoes back the X-Correlation-ID to track requests across microservices."
          schema:
            type: string
          example: "corr-67890-xyz"
        X-Tenant-ID:
          description: "Echoes back the tenant identifier if applicable."
          schema:
            type: string
          example: "tenant-xyz"
        Content-Type:
          description: "Specifies the format of the response body. Always application/json."
          schema:
            type: string
            enum: ["application/json"]
          example: "application/json"
        X-RateLimit-Limit:
          description: "Indicates the maximum number of allowed requests in a given timeframe."
          schema:
            type: integer
          example: 1000
        X-RateLimit-Remaining:
          description: "Indicates the remaining number of requests in the current rate limit window."
          schema:
            type: integer
          example: 999
        X-RateLimit-Reset:
          description: "Indicates the time (in UTC epoch seconds) when the rate limit will reset."
          schema:
            type: integer
          example: 1701237890

  schemas:
    
    AuditDetails:
      type: object
      description: "Contains audit details, tracking record creation, modification, and deletion events."
      properties:
        createdBy:
          type: string
          description: "UUID of the user or system that created the record."
          example: "550e8400-e29b-41d4-a716-446655440000"
        createdTime:
          type: integer
          format: int64
          description: "Timestamp (epoch milliseconds) when the record was created."
          example: 1701234567890
        lastModifiedTime:
          type: integer
          format: int64
          description: "Timestamp (epoch milliseconds) when the record was last modified."
          example: 1701237890123
          
    Address:
      type: object
      properties:
        tenantId:
          type: string
          description: "Tenant unique identifier."
          example: "tenant-123"
        addressId:
          type: string
          readOnly: true
          description: "Unique ID for the address."
          example: "ADDR-5678"
        streetAddress:
          type: string
          description: "Full street address (house number, road, building)."
          example: "221B Baker Street"
        area:
          type: string
          description: "Locality or zone."
          example: "Marylebone"
        city:
          type: string
          description: "City name."
          example: "London"
        state:
          type: string
          description: "State or province."
          example: "Greater London"
        countryCode:
          type: string
          description: "ISO 3166-1 alpha-2 country code."
          example: "GB"
        pincode:
          type: string
          description: "ZIP or postal code."
          example: "NW1 6XE"
        landmark:
          type: string
          description: "Nearby landmark for reference."
          example: "Near Regent's Park"
        geoLocation:
          type: object
          description: "Latitude and longitude of the address."
          properties:
            latitude:
              type: number
              format: double
              description: "Geographical latitude."
              example: 51.523767
            longitude:
              type: number
              format: double
              description: "Geographical longitude."
              example: -0.1585557
    
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: "Module-specific error code."
          example: "User.NotFound"
        message:
          type: string
          description: "Readable error message."
          example: "User not found."
        description:
          type: string
          description: "Optional long description for debugging."
        params:
          type: array
          description: "Optional placeholders for dynamic messages."
          items:
            type: string
              
              
              
